import React, { Component } from 'react';
import './App.css';
import { Search } from './Search';
import { GetUser } from './GetUser';
import { Charts } from './Charts';

class App extends Component {
  constructor(props) {
    super(props);
    this.state = {
      userName: null,
      error: null,
      showComponent: true
    };
  }

  handleChange = event => {
    this.setState({ value: event.target.value });
  };

  handleSubmit = userName => {
    this.setState({ userName: userName, error: null });
  };

  handleError = error => {
    this.setState({ error: error });
  };

  handleButtonSubmit = showComponent => {
    this.setState({ showComponent: true });
  };

  render() {
    const userName = this.state.userName;
    const error = this.state.error;
    const showComponent = this.state.showComponent;
    const fakeData = {"":{"completed":{"count":2156859,"mean":177,"median":0},"dropped":{"count":131985,"mean":14,"median":0},"total_days":{"count":767194,"mean":62,"median":0}},"F":{"completed":{"count":11428568,"mean":122,"median":0},"dropped":{"count":724154,"mean":8,"median":0},"total_days":{"count":4402069,"mean":45,"median":0}},"M":{"completed":{"count":31745762,"mean":171,"median":0},"dropped":{"count":1718360,"mean":11,"median":0},"total_days":{"count":13033452,"mean":61,"median":0}},"X":{"completed":{"count":251502,"mean":136,"median":0},"dropped":{"count":16846,"mean":10,"median":0},"total_days":{"count":90929,"mean":47,"median":0}}};
    const fakeDataYear = {"1930":{"completed":{"count":214478,"mean":128,"median":0},"dropped":{"count":15614,"mean":9,"median":0},"total_days":{"count":81144,"mean":55,"median":0}},"1931":{"completed":{"count":7299,"mean":110,"median":0},"dropped":{"count":564,"mean":8,"median":0},"total_days":{"count":2745,"mean":39,"median":0}},"1932":{"completed":{"count":4800,"mean":183,"median":0},"dropped":{"count":181,"mean":6,"median":0},"total_days":{"count":1651,"mean":63,"median":0}},"1933":{"completed":{"count":4393,"mean":169,"median":0},"dropped":{"count":487,"mean":22,"median":0},"total_days":{"count":1550,"mean":76,"median":0}},"1934":{"completed":{"count":3340,"mean":146,"median":0},"dropped":{"count":246,"mean":12,"median":0},"total_days":{"count":1617,"mean":73,"median":0}},"1935":{"completed":{"count":2252,"mean":127,"median":0},"dropped":{"count":278,"mean":15,"median":0},"total_days":{"count":656,"mean":35,"median":0}},"1936":{"completed":{"count":2847,"mean":228,"median":0},"dropped":{"count":216,"mean":16,"median":0},"total_days":{"count":856,"mean":59,"median":0}},"1937":{"completed":{"count":3031,"mean":178,"median":0},"dropped":{"count":146,"mean":10,"median":0},"total_days":{"count":1051,"mean":71,"median":0}},"1938":{"completed":{"count":1460,"mean":107,"median":0},"dropped":{"count":168,"mean":13,"median":0},"total_days":{"count":621,"mean":37,"median":0}},"1939":{"completed":{"count":4866,"mean":144,"median":0},"dropped":{"count":394,"mean":14,"median":0},"total_days":{"count":1874,"mean":52,"median":0}},"1940":{"completed":{"count":1325,"mean":174,"median":0},"dropped":{"count":196,"mean":16,"median":0},"total_days":{"count":476,"mean":50,"median":0}},"1941":{"completed":{"count":2579,"mean":102,"median":0},"dropped":{"count":189,"mean":9,"median":0},"total_days":{"count":929,"mean":44,"median":0}},"1942":{"completed":{"count":1778,"mean":73,"median":0},"dropped":{"count":115,"mean":5,"median":0},"total_days":{"count":656,"mean":30,"median":0}},"1943":{"completed":{"count":2004,"mean":136,"median":0},"dropped":{"count":251,"mean":19,"median":0},"total_days":{"count":672,"mean":46,"median":0}},"1944":{"completed":{"count":2835,"mean":118,"median":0},"dropped":{"count":152,"mean":8,"median":0},"total_days":{"count":2153,"mean":67,"median":0}},"1945":{"completed":{"count":8254,"mean":122,"median":0},"dropped":{"count":592,"mean":10,"median":0},"total_days":{"count":2527,"mean":38,"median":0}},"1946":{"completed":{"count":1718,"mean":188,"median":0},"dropped":{"count":77,"mean":8,"median":0},"total_days":{"count":793,"mean":90,"median":0}},"1947":{"completed":{"count":1455,"mean":118,"median":0},"dropped":{"count":239,"mean":17,"median":0},"total_days":{"count":494,"mean":39,"median":0}},"1948":{"completed":{"count":1232,"mean":155,"median":0},"dropped":{"count":59,"mean":8,"median":0},"total_days":{"count":422,"mean":52,"median":0}},"1949":{"completed":{"count":789,"mean":49,"median":0},"dropped":{"count":45,"mean":4,"median":0},"total_days":{"count":277,"mean":22,"median":0}},"1950":{"completed":{"count":3322,"mean":142,"median":0},"dropped":{"count":166,"mean":6,"median":0},"total_days":{"count":1452,"mean":61,"median":0}},"1951":{"completed":{"count":934,"mean":144,"median":0},"dropped":{"count":47,"mean":8,"median":0},"total_days":{"count":486,"mean":68,"median":0}},"1952":{"completed":{"count":979,"mean":73,"median":0},"dropped":{"count":97,"mean":7,"median":0},"total_days":{"count":323,"mean":25,"median":0}},"1953":{"completed":{"count":120,"mean":21,"median":0},"dropped":{"count":3,"mean":1,"median":0},"total_days":{"count":50,"mean":9,"median":0}},"1954":{"completed":{"count":566,"mean":76,"median":0},"dropped":{"count":29,"mean":3,"median":0},"total_days":{"count":166,"mean":19,"median":0}},"1955":{"completed":{"count":979,"mean":64,"median":0},"dropped":{"count":91,"mean":6,"median":0},"total_days":{"count":368,"mean":24,"median":0}},"1956":{"completed":{"count":776,"mean":56,"median":0},"dropped":{"count":21,"mean":2,"median":0},"total_days":{"count":283,"mean":20,"median":0}},"1957":{"completed":{"count":504,"mean":72,"median":0},"dropped":{"count":73,"mean":8,"median":0},"total_days":{"count":155,"mean":23,"median":0}},"1958":{"completed":{"count":1086,"mean":41,"median":0},"dropped":{"count":14,"mean":1,"median":0},"total_days":{"count":324,"mean":16,"median":0}},"1959":{"completed":{"count":1982,"mean":265,"median":0},"dropped":{"count":77,"mean":15,"median":0},"total_days":{"count":596,"mean":75,"median":0}},"1960":{"completed":{"count":3685,"mean":173,"median":0},"dropped":{"count":354,"mean":17,"median":0},"total_days":{"count":1283,"mean":64,"median":0}},"1961":{"completed":{"count":3190,"mean":328,"median":0},"dropped":{"count":182,"mean":15,"median":0},"total_days":{"count":1156,"mean":92,"median":0}},"1962":{"completed":{"count":1888,"mean":91,"median":0},"dropped":{"count":129,"mean":6,"median":0},"total_days":{"count":809,"mean":35,"median":0}},"1963":{"completed":{"count":2503,"mean":153,"median":0},"dropped":{"count":157,"mean":12,"median":0},"total_days":{"count":792,"mean":57,"median":0}},"1964":{"completed":{"count":5012,"mean":209,"median":0},"dropped":{"count":348,"mean":32,"median":0},"total_days":{"count":1631,"mean":89,"median":0}},"1965":{"completed":{"count":7506,"mean":174,"median":0},"dropped":{"count":235,"mean":8,"median":0},"total_days":{"count":2258,"mean":85,"median":0}},"1966":{"completed":{"count":12041,"mean":122,"median":0},"dropped":{"count":863,"mean":11,"median":0},"total_days":{"count":3619,"mean":38,"median":0}},"1967":{"completed":{"count":8704,"mean":205,"median":0},"dropped":{"count":168,"mean":4,"median":0},"total_days":{"count":2398,"mean":64,"median":0}},"1968":{"completed":{"count":7715,"mean":146,"median":0},"dropped":{"count":173,"mean":4,"median":0},"total_days":{"count":2358,"mean":46,"median":0}},"1969":{"completed":{"count":22445,"mean":109,"median":0},"dropped":{"count":1314,"mean":7,"median":0},"total_days":{"count":8246,"mean":42,"median":0}},"1970":{"completed":{"count":12323,"mean":100,"median":0},"dropped":{"count":1321,"mean":12,"median":0},"total_days":{"count":3568,"mean":27,"median":0}},"1971":{"completed":{"count":11846,"mean":174,"median":0},"dropped":{"count":404,"mean":4,"median":0},"total_days":{"count":3539,"mean":57,"median":0}},"1972":{"completed":{"count":14301,"mean":96,"median":0},"dropped":{"count":680,"mean":5,"median":0},"total_days":{"count":4126,"mean":34,"median":0}},"1973":{"completed":{"count":21225,"mean":203,"median":0},"dropped":{"count":1197,"mean":8,"median":0},"total_days":{"count":6563,"mean":68,"median":0}},"1974":{"completed":{"count":20042,"mean":165,"median":0},"dropped":{"count":1508,"mean":18,"median":0},"total_days":{"count":5917,"mean":52,"median":0}},"1975":{"completed":{"count":30832,"mean":243,"median":0},"dropped":{"count":1761,"mean":10,"median":0},"total_days":{"count":10231,"mean":73,"median":0}},"1976":{"completed":{"count":39142,"mean":164,"median":0},"dropped":{"count":2041,"mean":10,"median":0},"total_days":{"count":12707,"mean":52,"median":0}},"1977":{"completed":{"count":47165,"mean":173,"median":0},"dropped":{"count":3570,"mean":12,"median":0},"total_days":{"count":15315,"mean":59,"median":0}},"1978":{"completed":{"count":58984,"mean":196,"median":0},"dropped":{"count":4302,"mean":12,"median":0},"total_days":{"count":18103,"mean":62,"median":0}},"1979":{"completed":{"count":85381,"mean":249,"median":0},"dropped":{"count":5207,"mean":26,"median":0},"total_days":{"count":28054,"mean":72,"median":0}},"1980":{"completed":{"count":147800,"mean":183,"median":0},"dropped":{"count":8079,"mean":11,"median":0},"total_days":{"count":47938,"mean":62,"median":0}},"1981":{"completed":{"count":166542,"mean":183,"median":0},"dropped":{"count":11853,"mean":15,"median":0},"total_days":{"count":54133,"mean":66,"median":0}},"1982":{"completed":{"count":240014,"mean":194,"median":0},"dropped":{"count":14657,"mean":17,"median":0},"total_days":{"count":82016,"mean":63,"median":0}},"1983":{"completed":{"count":331030,"mean":213,"median":0},"dropped":{"count":20577,"mean":12,"median":0},"total_days":{"count":109752,"mean":66,"median":0}},"1984":{"completed":{"count":442343,"mean":170,"median":0},"dropped":{"count":33095,"mean":16,"median":0},"total_days":{"count":149481,"mean":56,"median":0}},"1985":{"completed":{"count":637641,"mean":201,"median":0},"dropped":{"count":39934,"mean":11,"median":0},"total_days":{"count":219184,"mean":68,"median":0}},"1986":{"completed":{"count":866142,"mean":373,"median":0},"dropped":{"count":54681,"mean":11,"median":0},"total_days":{"count":310038,"mean":114,"median":0}},"1987":{"completed":{"count":1148252,"mean":227,"median":0},"dropped":{"count":70370,"mean":12,"median":0},"total_days":{"count":444999,"mean":73,"median":0}},"1988":{"completed":{"count":1623953,"mean":215,"median":0},"dropped":{"count":96663,"mean":14,"median":0},"total_days":{"count":574769,"mean":71,"median":0}},"1989":{"completed":{"count":2100103,"mean":190,"median":0},"dropped":{"count":130339,"mean":14,"median":0},"total_days":{"count":876999,"mean":72,"median":0}},"1990":{"completed":{"count":2832958,"mean":170,"median":0},"dropped":{"count":168772,"mean":9,"median":0},"total_days":{"count":1076313,"mean":61,"median":0}},"1991":{"completed":{"count":3005365,"mean":190,"median":0},"dropped":{"count":173880,"mean":14,"median":0},"total_days":{"count":1127725,"mean":72,"median":0}},"1992":{"completed":{"count":3372649,"mean":154,"median":0},"dropped":{"count":187735,"mean":9,"median":0},"total_days":{"count":1288237,"mean":57,"median":0}},"1993":{"completed":{"count":3654494,"mean":169,"median":0},"dropped":{"count":203110,"mean":11,"median":0},"total_days":{"count":1387560,"mean":59,"median":0}},"1994":{"completed":{"count":4005602,"mean":158,"median":0},"dropped":{"count":219230,"mean":10,"median":0},"total_days":{"count":2561293,"mean":77,"median":0}},"1995":{"completed":{"count":4138153,"mean":155,"median":0},"dropped":{"count":229513,"mean":9,"median":0},"total_days":{"count":1609173,"mean":56,"median":0}},"1996":{"completed":{"count":4031432,"mean":138,"median":0},"dropped":{"count":220052,"mean":8,"median":0},"total_days":{"count":1561421,"mean":51,"median":0}},"1997":{"completed":{"count":3801784,"mean":138,"median":0},"dropped":{"count":202065,"mean":8,"median":0},"total_days":{"count":1442161,"mean":51,"median":0}},"1998":{"completed":{"count":3089442,"mean":131,"median":0},"dropped":{"count":165547,"mean":7,"median":0},"total_days":{"count":1164110,"mean":48,"median":0}},"1999":{"completed":{"count":2237456,"mean":119,"median":0},"dropped":{"count":119042,"mean":7,"median":0},"total_days":{"count":818344,"mean":43,"median":0}},"2000":{"completed":{"count":1446854,"mean":115,"median":0},"dropped":{"count":81237,"mean":7,"median":0},"total_days":{"count":549983,"mean":42,"median":0}},"2001":{"completed":{"count":755586,"mean":106,"median":0},"dropped":{"count":41961,"mean":6,"median":0},"total_days":{"count":289465,"mean":44,"median":0}},"2002":{"completed":{"count":378682,"mean":113,"median":0},"dropped":{"count":21243,"mean":6,"median":0},"total_days":{"count":144412,"mean":38,"median":0}},"2003":{"completed":{"count":124293,"mean":79,"median":0},"dropped":{"count":7571,"mean":5,"median":0},"total_days":{"count":51562,"mean":62,"median":0}},"2004":{"completed":{"count":38909,"mean":79,"median":0},"dropped":{"count":2484,"mean":5,"median":0},"total_days":{"count":14856,"mean":27,"median":0}},"2005":{"completed":{"count":10571,"mean":57,"median":0},"dropped":{"count":592,"mean":3,"median":0},"total_days":{"count":4778,"mean":26,"median":0}},"2006":{"completed":{"count":8682,"mean":89,"median":0},"dropped":{"count":727,"mean":11,"median":0},"total_days":{"count":3021,"mean":32,"median":0}},"2007":{"completed":{"count":5189,"mean":101,"median":0},"dropped":{"count":473,"mean":8,"median":0},"total_days":{"count":1849,"mean":33,"median":0}},"2008":{"completed":{"count":9764,"mean":136,"median":0},"dropped":{"count":1387,"mean":22,"median":0},"total_days":{"count":2910,"mean":41,"median":0}},"2009":{"completed":{"count":6898,"mean":116,"median":0},"dropped":{"count":634,"mean":7,"median":0},"total_days":{"count":2575,"mean":39,"median":0}},"2010":{"completed":{"count":18126,"mean":186,"median":0},"dropped":{"count":1335,"mean":12,"median":0},"total_days":{"count":6684,"mean":64,"median":0}},"2011":{"completed":{"count":14795,"mean":169,"median":0},"dropped":{"count":1256,"mean":17,"median":0},"total_days":{"count":5669,"mean":55,"median":0}},"2012":{"completed":{"count":20957,"mean":170,"median":0},"dropped":{"count":2240,"mean":27,"median":0},"total_days":{"count":7483,"mean":62,"median":0}},"2013":{"completed":{"count":20486,"mean":228,"median":0},"dropped":{"count":1171,"mean":12,"median":0},"total_days":{"count":7103,"mean":67,"median":0}},"2014":{"completed":{"count":29999,"mean":196,"median":0},"dropped":{"count":2388,"mean":24,"median":0},"total_days":{"count":10676,"mean":71,"median":0}},"2015":{"completed":{"count":20454,"mean":119,"median":0},"dropped":{"count":1569,"mean":8,"median":0},"total_days":{"count":8861,"mean":52,"median":0}},"2016":{"completed":{"count":31045,"mean":179,"median":0},"dropped":{"count":2343,"mean":9,"median":0},"total_days":{"count":10672,"mean":52,"median":0}},"2017":{"completed":{"count":31036,"mean":140,"median":0},"dropped":{"count":2151,"mean":9,"median":0},"total_days":{"count":11577,"mean":50,"median":0}},"2018":{"completed":{"count":37297,"mean":186,"median":0},"dropped":{"count":2648,"mean":12,"median":0},"total_days":{"count":13822,"mean":74,"median":0}}}    
    if (userName && !error) {
      return <GetUser userName={userName} onError={this.handleError} />;
    } else if (showComponent === true) return <Charts result={fakeDataYear} />;
    else {
      return (
        <Search
          onSubmit={this.handleSubmit}
          showError={error}
          onButtonSubmit={this.handleButtonSubmit}
        />
      );
    }
  }
}

export default App;